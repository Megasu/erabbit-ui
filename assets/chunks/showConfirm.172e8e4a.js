import{aq as O,d as v,g,H as l,ar as T,x as C,as as $,h as p,j,O as k,a2 as B,aa as E,a3 as z,T as L,L as W}from"./framework.678668a3.js";function y(e){const t=`er-${e}`;return[t,(...o)=>{const s=[];return o&&o.forEach(c=>{if(c)return/^__/.test(c)?s.push(`${t}${c}`):s.push(`${t}--${c}`)}),s.join(" ")}]}function P(e){return typeof e=="number"||/^\d+(\.\d+)?$/.test(e)}function H(e){const t=O(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}function I(e,t){const n={...e};return t.forEach(o=>delete n[o]),n}const[V,K]=y("icon"),R={name:{type:String,default:""},size:{type:[Number,String],default:"1em"},color:{type:String,default:""}},Y=v({name:"ErIcon",props:R,setup(e){return()=>{const t=g(()=>({fontSize:P(e.size)?`${e.size}px`:e.size,color:e.color||void 0}));return l("i",{class:[V,K(e.name)],style:t.value},null)}}}),_=Y,q={type:{type:String,default:"default"},size:{type:String,default:"middle"}},[A,D]=y("button"),M=v({name:"ErButton",props:q,setup(e,{slots:t}){return()=>{var n;return l("button",{class:[A,"ellipsis",D(e.size,e.type)]},[(n=t.default)==null?void 0:n.call(t)])}}}),S=M;let m;const x=()=>typeof window<"u";function U(){var e;if(!x())return 0;if(m!==void 0)return m;const t=document.createElement("div");t.className="er-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",t.appendChild(o);const s=o.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),m=n-s,m}const F=e=>{const t="er-overflow-hidden";if(!T(e))throw new Error('useLockScroll: "trigger" must be a ref');if(!x()||document.body.classList.contains(t))return;let n=0,o=!1,s="0";const c=()=>{setTimeout(()=>{document.body.classList.remove(t),o&&document&&(document.body.style.width=s)},200)};C(e,u=>{var i;if(!u){c();return}o=!document.body.classList.contains(t),o&&(s=document.body.style.width),n=U();const d=document.documentElement.clientHeight<document.body.scrollHeight,r=(i=document.defaultView)==null?void 0:i.getComputedStyle(document.body).overflowY;n>0&&(d||r==="scroll")&&o&&(document.body.style.width=`calc(100% - ${n}px)`),document.body.classList.add(t)}),$(()=>c())};function G(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!z(e)}const[J,f]=y("confirm"),Q={visible:Boolean,title:{type:String,default:""},message:{type:String,default:""},cancelText:{type:String,default:"Cancel"},submitText:{type:String,default:"OK"},teleport:{type:[String,Object],default:"body"},lockScroll:{type:Boolean,default:!0}},X=v({name:"ErConfirm",props:Q,emits:["update:visible"],setup(e,{emit:t}){const n=p(!1),o=p(!1),s=p(null);C(()=>e.visible,a=>{a?u():c()}),j(()=>{e.visible&&u()});const c=()=>{o.value=!1,k(()=>{n.value=!1})},u=()=>{n.value=!0,setTimeout(()=>{o.value=!0},0)};B(s,()=>{t("update:visible",!1,"cancel")});const i=()=>{t("update:visible",!1,"cancel")},d=()=>{t("update:visible",!1,"submit")};e.lockScroll&&F(o);const r=()=>l(L,{name:"popper"},{default:()=>[n.value?l("div",{class:["er-popper",J]},[l("div",{class:[f("__wrapper"),o.value?"active":""],ref:s},[l("div",{class:f("__header")},[l("h3",null,[e.title]),l(_,{name:"close",color:"#666",onClick:i},null)]),l("div",{class:f("__body")},[l(_,{name:"warn"},null),l("p",null,[e.message])]),l("div",{class:f("__footer")},[l(S,{size:"mini",onClick:i},{default:()=>[e.cancelText]}),l(S,{size:"mini",type:"primary",onClick:d},{default:()=>[e.submitText]})])])]):null]});return()=>{let a;return e.teleport?l(E,{to:e.teleport},G(a=r())?a:{default:()=>[a]}):r()}}}),N={title:"",message:"",cancelText:"Cancel",submitText:"OK",teleport:"body",lockScroll:!0};let b;const Z=()=>{({instance:b}=H({setup(e,{expose:t}){const n=p({...N,visible:!1}),o=i=>{Object.assign(n.value,i,{visible:!0})},s=(i,d)=>{var r,a,h,w;d==="cancel"&&((a=(r=n.value).cancel)==null||a.call(r)),d==="submit"&&((w=(h=n.value).submit)==null||w.call(h)),n.value.visible=i};t({open:o});const u=g(()=>I(n.value,["submit","cancel"]));return()=>l(X,W(u.value,{"onUpdate:visible":s}),null)}}))},te=e=>new Promise((t,n)=>{b||Z(),b.open({...Object.assign(N,e),submit:()=>{e.submit&&e.submit(),t("submit")},cancel:()=>{e.cancel&&e.cancel(),n("cancel")}})});export{S as B,_ as I,X as _,y as c,te as s};
